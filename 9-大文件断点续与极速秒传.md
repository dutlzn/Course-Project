---

---

#  大文件断点续传与极速秒传

# 分片传输的试探

文件越大，上传失败率越大

当文件上传到一般，网络断了，下次再上传，只上传剩下的一般，这就是

断点续传



极速秒传，开始上传之前，先检查一下文件有没有上传过，

如果已经上传过了，直接弹出提示，极速秒传成功



一个文件有10m，每个分片定义为1m， 那这个文件就会被分为10片



前端，拷贝file.vue 组件， 定义为big-file.vue



big-file.vue 

```vue
		if (!validateSuffix) {
					Toast.warning("文件格式不正确,只支持上传:" + suffixs.join(","));
					$("#" + _this.inputId + "-input").val("");
					return;
				}

// 文件分片
				let shardSize = 20*1024*1024;// 20mb为一个分片
				let shardIndex = 1;//分片索引
				let start = shardIndex * shardSize;// 当前分片起始位置
				let end = Math.min(file.size, start + shardSize);//当前分片结束位置
				let fileShard = file.slice(start, end);
				
				console.log(fileShard);
				
				formData.append('file', fileShard);
				formData.append('use', _this.use);
				
```



